import{d as e,o as a,c as l,k as t,t as n,l as o,m as d,F as i,a1 as s,y as r,a4 as p,a5 as c,v as u,a6 as f,a7 as g,h as v,i as m,r as b,N as h,a8 as y,a9 as x,aa as k,ab as C,b as _,ac as I,a as j,ad as V}from"./index.f465d987.js";/* empty css                  *//* empty css                      *//* empty css                  *//* empty css               *//* empty css                 *//* empty css                     *//* empty css                  */import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as L}from"./Dialog.c111de70.js";/* empty css                   */const S={class:"flex-r top-search"},T={key:0},U={key:1},z=u("搜索");var D=w(e({props:{type:{default:"select"},model:{type:[String,Number,Boolean],default:""},datas:{default:()=>[{value:"",label:"请选择"},{value:"1",label:"总部营业部"},{value:"2",label:"北京营业部"},{value:"646fa7f2b06e45fabdbce0ab021619d0",label:"无锡营业部"}]},leftTitle:{default:""}},emits:["update:change","clickSearch"],setup(e,{emit:u}){const b=e,h=()=>{u("update:change",b.model)};return(b,y)=>{const x=f,k=g,C=v,_=m;return a(),l("div",S,["select"==e.type?(a(),l("div",T,[t("span",null,n(e.leftTitle)+":",1),o(k,{modelValue:e.model,"onUpdate:modelValue":y[0]||(y[0]=e=>p(model)?model.value=e:null),onChange:h,placeholder:"请选择"},{default:d((()=>[(a(!0),l(i,null,s(e.datas,(e=>(a(),r(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])):c("v-if",!0),"input"==e.type?(a(),l("div",U,[t("span",null,n(e.leftTitle)+":",1),o(C,{modelValue:e.model,"onUpdate:modelValue":y[1]||(y[1]=e=>p(model)?model.value=e:null),placeholder:"请输入",onChange:h},null,8,["modelValue"])])):c("v-if",!0),"search"==e.type?(a(),r(_,{key:2,type:"primary",onClick:y[2]||(y[2]=e=>u("clickSearch"))},{default:d((()=>[z])),_:1})):c("v-if",!0)])}}}),[["__scopeId","data-v-0c9fe1f5"]]);const N={id:"table-container",class:"containers"},$={id:"table-search",class:"flex-r",style:{"flex-wrap":"wrap"}},B={style:{height:"40px",padding:"10px"}};var E=w(e({props:{pageList:{default:()=>[]},columns:{default:()=>[]},pageCount:{default:0},pageIndex:{default:1}},emits:["update:change","clickSearch"],setup(e,{emit:n}){const p=b(1),c=b(800),u=e=>{p.value=e,n("update:change",e),n("clickSearch")},f=()=>{let e=document.getElementById("table-container"),a=document.getElementById("table-search");if(null===e||null===a)c.value=800;else{let l=e.offsetHeight-a.offsetHeight-50;c.value=l}};return h((()=>{f(),window.addEventListener("resize",(()=>{f()}))})),(n,f)=>{const g=x,v=k,m=C;return a(),l("div",N,[t("div",$,[y(n.$slots,"search",{},void 0,!0)]),(a(),r(v,{key:c.value,data:e.pageList,stripe:"",border:"","table-layout":"fixed",height:c.value},{default:d((()=>[o(g,{type:"index",width:"80",label:"序号",fixed:"",index:20*p.value-20+1,"header-align":"center",align:"center"},null,8,["index"]),(a(!0),l(i,null,s(e.columns,((e,l)=>(a(),r(g,{key:l,"header-align":"center",align:"center",sortable:"",width:"250",fixed:e.fixed,prop:e.prop,label:e.label},null,8,["fixed","prop","label"])))),128)),y(n.$slots,"default",{},void 0,!0)])),_:3},8,["data","height"])),t("div",B,[o(m,{background:"",layout:"total, prev, pager, next",total:e.pageCount,onCurrentChange:u},null,8,["total"])])])}}}),[["__scopeId","data-v-ef31551a"]]);function M(){return{depts:[{value:"",label:"请选择"},{value:"1",label:"总部营业部"},{value:"2",label:"北京营业部"},{value:"646fa7f2b06e45fabdbce0ab021619d0",label:"无锡营业部"}],tableColumns:[{prop:"drvName",label:"司机姓名",fixed:"left"},{prop:"deptName",label:"营业部"},{prop:"ownFlag",label:"签约情况"},{prop:"drvTel",label:"司机电话"},{prop:"vehPlate",label:"车牌号"},{prop:"status",label:"审核状态"},{prop:"checkUser",label:"审核人"},{prop:"checkTime",label:"审核时间"},{prop:"developUser",label:"维护人"}],driverModel:_({deptId:"",content:"",pageIndex:1,pageSize:20}),dialogVisible:b(!1),dialogTitle:b("运单详情")}}const{driverModel:A}=M();function F(){const e=b([]),a=b(0),l=async l=>{const t=await async function(e){return await I.post("/api/v1/driver/getDriverInfoList",e)}(l);e.value=t.data,a.value=t.count};return h((()=>{l(A)})),{getDriverInfoListApi:l,pageList:e,pageCount:a}}const H={class:"containers"},P=u(" 删除 "),q=u(" 编辑 "),G=u(" 保存 "),J=u("关闭"),K=e({setup(e){let{depts:t,driverModel:n,tableColumns:i,dialogVisible:s,dialogTitle:u}=M(),{pageList:f,pageCount:g,getDriverInfoListApi:v}=F();const b=()=>{v(n)},h=()=>{s.value=!0};return(e,v)=>{const y=m,k=x,C=m;return a(),l("div",H,[o(j(E),{change:j(n).pageIndex,"onUpdate:change":v[2]||(v[2]=e=>j(n).pageIndex=e),"page-list":j(f),columns:j(i),"page-count":j(g),onClickSearch:b},{search:d((()=>[o(j(D),{change:j(n).deptId,"onUpdate:change":v[0]||(v[0]=e=>j(n).deptId=e),model:j(n).deptId,datas:j(t),"left-title":"营业部"},null,8,["change","model","datas"]),o(j(D),{change:j(n).content,"onUpdate:change":v[1]||(v[1]=e=>j(n).content=e),model:j(n).content,type:"input","left-title":"关键字"},null,8,["change","model"]),o(j(D),{type:"search",onClickSearch:b})])),default:d((()=>[o(k,{fixed:"right",label:"操作","header-align":"center",align:"center",width:"220"},{default:d((e=>[o(y,{type:"text",size:"small",onClick:V((a=>h(e.$index)),["prevent"])},{default:d((()=>[P])),_:2},1032,["onClick"]),o(y,{type:"text",size:"small",onClick:V((a=>h(e.$index)),["prevent"])},{default:d((()=>[q])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["change","page-list","columns","page-count"]),o(j(L),{modelValue:j(s),"onUpdate:modelValue":v[4]||(v[4]=e=>p(s)?s.value=e:s=e),title:j(u)},{footer:d((()=>["detail"!==e.actionType?(a(),r(C,{key:0,type:"primary",loading:e.loading,onClick:e.save},{default:d((()=>[G])),_:1},8,["loading","onClick"])):c("v-if",!0),o(C,{onClick:v[3]||(v[3]=e=>p(s)?s.value=!1:s=!1)},{default:d((()=>[J])),_:1})])),_:1},8,["modelValue","title"])])}}});export{K as default};
