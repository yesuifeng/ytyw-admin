var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(o,l,t)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[l]=t,s=(e,o)=>{for(var l in o||(o={}))n.call(o,l)&&r(e,l,o[l]);if(t)for(var l of t(o))a.call(o,l)&&r(e,l,o[l]);return e};import{an as i,ao as d,h as c,ap as u,aq as p,a7 as m,ar as v,as as f,at as b,au as P,av as h,aw as g,ax as j,ay as S,$ as C,az as O,aA as x,A as y,l as T,a6 as k,aB as w,aC as A,aD as F,aE as R,aF as I,d as $,z as D,r as B,K as E,a as V,N as H,w as M,j as N,ah as z,J as _,aG as q,H as G,B as J,E as K,aH as L,C as U,am as W,_ as Q,F as X}from"./index.fce40114.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                   */import{I as Y}from"./InputPassword.6e38ae1b.js";import{_ as Z}from"./Editor.100b4827.js";import{g as ee}from"./tsxHelper.dbd7218e.js";const oe={Radio:i,Checkbox:d,CheckboxButton:d,Input:c,Autocomplete:u,InputNumber:p,Select:m,Cascader:v,Switch:f,Slider:b,TimePicker:P,DatePicker:h,Rate:g,ColorPicker:j,Transfer:S,Divider:C,TimeSelect:O,SelectV2:x,RadioButton:i,InputPassword:Y,Editor:Z},{t:le}=y();function te(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!L(e)}const{getPrefixCls:ne}=_(),ae=ne("form");var re=$({name:"Form",props:{schema:{type:Array,default:()=>[]},isCol:D.bool.def(!0),model:{type:Object,default:()=>({})},autoSetPlaceholder:D.bool.def(!0),isCustom:D.bool.def(!1),labelWidth:D.oneOfType([String,Number]).def("auto")},emits:["register"],setup(e,{slots:t,expose:n,emit:a}){const r=B(),i=B({}),d=B({}),c=E((()=>{const o=s({},e);return Object.assign(o,V(d)),o})),u=B({});H((()=>{var e;a("register",null==(e=V(r))?void 0:e.$parent,V(r))}));n({setValues:(e={})=>{u.value=Object.assign(V(u),e)},formModel:u,setProps:(e={})=>{d.value=Object.assign(V(d),e),i.value=e},delSchema:e=>{const{schema:o}=V(c),l=q(o,(o=>o.field===e));l>-1&&o.splice(l,1)},addSchema:(e,o)=>{const{schema:l}=V(c);void 0===o?l.push(e):l.splice(o,0,e)},setSchema:e=>{const{schema:o}=V(c);for(const l of o)for(const o of e)l.field===o.field&&G(l,o.path,o.value)},getElFormRef:()=>V(r)}),M((()=>V(c).schema),((e=[])=>{u.value=((e,o)=>{const l=s({},o);return e.map((e=>{if(e.hidden)delete l[e.field];else if(e.component&&"Divider"!==e.component){const o=Reflect.has(l,e.field);l[e.field]=o?l[e.field]:void 0!==e.value?e.value:""}})),l})(e,V(u))}),{immediate:!0,deep:!0});const p=()=>{const{schema:e=[],isCol:o}=V(c);return e.filter((e=>!e.hidden)).map((e=>{let l;return"Divider"===e.component?T(oe.Divider,s({contentPosition:"left"},e.componentProps),{default:()=>[null==e?void 0:e.label]}):o?T(U,((e={})=>s(s({},e.span?{}:{xs:24,sm:12,md:12,lg:12,xl:12}),e))(e.colProps),te(l=m(e))?l:{default:()=>[l]}):m(e)}))},m=e=>{var n,a;const r=["SelectV2","Cascader","Transfer"],i=s({},((e,o={},l)=>{const t={};for(const n in o)o[n]&&(t[n]=o=>ee(e,`${l}-${n}`,o));return t})(t,null==(n=null==e?void 0:e.componentProps)?void 0:n.slots,e.field));"SelectV2"!==(null==e?void 0:e.component)&&"Cascader"!==(null==e?void 0:e.component)&&(null==(a=null==e?void 0:e.componentProps)?void 0:a.options)&&(i.default=()=>v(e));const d=((e,o)=>{const l={};return e[`${o}-error`]&&(l.error=l=>ee(e,`${o}-error`,l)),e[`${o}-label`]&&(l.label=l=>ee(e,`${o}-label`,l)),l})(t,e.field);return(null==e?void 0:e.labelMessage)&&(d.label=()=>T(X,null,[T("span",null,[e.label]),T(W,{placement:"right","raw-content":!0},{content:()=>T("span",{innerHTML:e.labelMessage},null),default:()=>T(Q,{icon:"ep:warning",size:16,color:"var(--el-color-primary)",class:"ml-2px relative top-1px"},null)})])),T(K,z(e.formItemProps||{},{prop:e.field,label:e.label||""}),(p=s({},d),m={default:()=>{var o,l;const n=oe[e.component],{autoSetPlaceholder:a}=V(c);return t[e.field]?ee(t,e.field,{item:e}):T(n,z({modelValue:u.value[e.field],"onUpdate:modelValue":o=>u.value[e.field]=o},a&&(e=>{var o,l;return["Input","Autocomplete","InputNumber","InputPassword"].includes(null==e?void 0:e.component)?{placeholder:le("common.inputText")}:["Select","TimePicker","DatePicker","TimeSelect","TimeSelect"].includes(null==e?void 0:e.component)?["datetimerange","daterange","monthrange","datetimerange","daterange"].includes((null==(o=null==e?void 0:e.componentProps)?void 0:o.type)||(null==(l=null==e?void 0:e.componentProps)?void 0:l.isRange))?{startPlaceholder:le("common.startTimeText"),endPlaceholder:le("common.endTimeText"),rangeSeparator:"-"}:{placeholder:le("common.selectText")}:{}})(e),(e=>{const o=["ColorPicker"].includes(e.component)?s({},e.componentProps):s({clearable:!0},e.componentProps);return null==o||delete o.slots,o})(e),r.includes(null==e?void 0:e.component)&&(null==(o=null==e?void 0:e.componentProps)?void 0:o.options)?{options:(null==(l=null==e?void 0:e.componentProps)?void 0:l.options)||[]}:{}),s({},i))}},o(p,l(m))));var p,m},v=e=>{switch(e.component){case"Select":const{renderSelectOptions:o}=(e=>{const o=(o,l)=>{var t,n,a,r;const s=null==(n=null==(t=null==o?void 0:o.componentProps)?void 0:t.optionsAlias)?void 0:n.labelField,i=null==(r=null==(a=null==o?void 0:o.componentProps)?void 0:a.optionsAlias)?void 0:r.valueField;return T(k,{label:l[s||"label"],value:l[i||"value"]},{default:()=>{var t;return(null==(t=null==o?void 0:o.componentProps)?void 0:t.optionsSlot)?ee(e,`${o.field}-option`,{item:l}):void 0}})};return{renderSelectOptions:e=>{var l,t,n,a;const r=null==(t=null==(l=null==e?void 0:e.componentProps)?void 0:l.optionsAlias)?void 0:t.labelField;return null==(a=null==(n=null==e?void 0:e.componentProps)?void 0:n.options)?void 0:a.map((l=>{var t;return(null==(t=null==l?void 0:l.options)?void 0:t.length)?T(w,{label:l[r||"label"]},{default:()=>{var t;return null==(t=null==l?void 0:l.options)?void 0:t.map((l=>o(e,l)))}}):o(e,l)}))}}})(t);return o(e);case"Radio":case"RadioButton":const{renderRadioOptions:l}={renderRadioOptions:e=>{var o,l,t,n,a,r;const s=null==(l=null==(o=null==e?void 0:e.componentProps)?void 0:o.optionsAlias)?void 0:l.labelField,i=null==(n=null==(t=null==e?void 0:e.componentProps)?void 0:t.optionsAlias)?void 0:n.valueField,d="Radio"===e.component?A:F;return null==(r=null==(a=null==e?void 0:e.componentProps)?void 0:a.options)?void 0:r.map((e=>T(d,{label:e[s||"value"]},{default:()=>[e[i||"label"]]})))}};return l(e);case"Checkbox":case"CheckboxButton":const{renderChcekboxOptions:n}={renderChcekboxOptions:e=>{var o,l,t,n,a,r;const s=null==(l=null==(o=null==e?void 0:e.componentProps)?void 0:o.optionsAlias)?void 0:l.labelField,i=null==(n=null==(t=null==e?void 0:e.componentProps)?void 0:t.optionsAlias)?void 0:n.valueField,d="Checkbox"===e.component?R:I;return null==(r=null==(a=null==e?void 0:e.componentProps)?void 0:a.options)?void 0:r.map((e=>T(d,{label:e[s||"value"]},{default:()=>[e[i||"label"]]})))}};return n(e)}};return()=>T(N,z({ref:r},(()=>{const e=["schema","isCol","autoSetPlaceholder","isCustom","model"],o=s({},V(c));for(const l in o)-1!==e.indexOf(l)&&delete o[l];return o})(),{model:e.isCustom?e.model:u,class:ae}),{default:()=>{const{isCustom:e}=V(c);return e?ee(t,"default"):(()=>{let e;const{isCol:o}=V(c);return o?T(J,{gutter:20},te(e=p())?e:{default:()=>[e]}):p()})()}})}});export{re as _};
