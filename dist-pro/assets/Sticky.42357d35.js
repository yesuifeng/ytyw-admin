import{d as e,z as t,r as o,aK as n,b2 as i,N as u,b3 as l,P as a,b4 as s,o as r,c as d,k as v,a8 as f,I as c,Q as p}from"./index.fce40114.js";const g=v("div",null,"sticky",-1),m=e({props:{offset:t.number.def(0),zIndex:t.number.def(999),className:t.string.def(""),position:{type:String,validator:function(e){return-1!==["top","bottom"].indexOf(e)},default:"top"}},setup(e){const t=e,m=o("auto"),x=o("auto"),h=o(!1),w=n(),y=n(),{height:b}=i();u((()=>{var e;x.value=(null==(e=w.value)?void 0:e.getBoundingClientRect().height)+"px",y.value=C(w.value,!0),l(y,"scroll",I),l("resize",B),I()})),a((()=>{I()}));const z=(e,t)=>{if(!s)return!1;const o=((e,t)=>{var o;if(!s||!e||!t)return"";t.replace(/-(\w)/g,((e,t)=>t?t.toUpperCase():""));try{const n=e.style[t];if(n)return n;const i=null==(o=document.defaultView)?void 0:o.getComputedStyle(e,"");return i?i[t]:""}catch{return e.style[t]}})(e,{undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)]);return["scroll","auto","overlay"].some((e=>o.includes(e)))},C=(e,t)=>{if(!s)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(z(o,t))return o;o=o.parentNode}return o},I=()=>{var e,o;if(m.value=w.value.getBoundingClientRect().width+"px","top"===t.position){const o=null==(e=w.value)?void 0:e.getBoundingClientRect().top;if(void 0!==o&&o<t.offset)return void R();k()}else{const e=null==(o=w.value)?void 0:o.getBoundingClientRect().bottom;if(void 0!==e&&e>b.value-t.offset)return void R();k()}},B=()=>{h.value&&w.value&&(m.value=w.value.getBoundingClientRect().width+"px")},R=()=>{h.value||(h.value=!0)},k=()=>{h.value&&(m.value="auto",h.value=!1)};return(t,o)=>(r(),d("div",{style:p({height:x.value,zIndex:e.zIndex}),ref_key:"refSticky",ref:w},[v("div",{class:c(e.className),style:p({top:"top"===e.position?e.offset+"px":"",bottom:"top"!==e.position?e.offset+"px":"",zIndex:e.zIndex,position:h.value?"fixed":"static",width:m.value,height:x.value})},[f(t.$slots,"default",{},(()=>[g]))],6)],4))}});export{m as _};
