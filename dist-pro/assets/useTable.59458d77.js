var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,i=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(n)for(var t of n(a))s.call(a,t)&&o(e,t,a[t]);return e};import{b as l,K as c,w as p,r as u,a as g,aR as m,X as d,aS as b,A as f,ak as v}from"./index.f465d987.js";/* empty css                       *//* empty css                  *//* empty css                 *//* empty css                   */const{t:w}=f(),y=e=>{const n=l({pageSize:10,currentPage:1,total:10,tableList:[],paramsObj:{},loading:!0,currentRow:null}),r=c((()=>{return{params:(e=i({},n.paramsObj.params),r={pageSize:n.pageSize,pageIndex:n.currentPage},a(e,t(r)))};var e,r}));p((()=>n.currentPage),(()=>{P.getList()})),p((()=>n.pageSize),(()=>{n.currentPage=1,P.getList()}));const s=u(),o=u(),f=async()=>{await v();const e=g(s);return e},y=async(a,t)=>{if(await((null==e?void 0:e.delListApi)&&(null==e?void 0:e.delListApi(a)))){d.success(w("common.delSuccess"));const e=(n.total%n.pageSize===t.length||1===n.pageSize)&&n.currentPage>1?n.currentPage-1:n.currentPage;n.currentPage=e,P.getList()}},P={getList:async()=>{var a;n.loading=!0;const t=await(null==e?void 0:e.getListApi(g(r)).catch((()=>{})).finally((()=>{n.loading=!1})));t&&(n.tableList=m(t.data||{},null==e?void 0:e.response.list),n.total=m(t.data||{},null==(a=null==e?void 0:e.response)?void 0:a.total)||0)},setProps:async(e={})=>{const a=await f();null==a||a.setProps(e)},setColumn:async e=>{const a=await f();null==a||a.setColumn(e)},getSelections:async()=>{const e=await f();return(null==e?void 0:e.selections)||[]},setSearchParams:e=>{n.currentPage=1,n.paramsObj=Object.assign(n.paramsObj,{params:i({pageSize:n.pageSize,pageIndex:n.currentPage},e)}),P.getList()},delList:async(e,a,t=!0)=>{const r=await f();if(a){if(!(null==r?void 0:r.selections.length))return void d.warning(w("common.delNoData"))}else if(!n.currentRow)return void d.warning(w("common.delNoData"));const s={data:{ids:e}};t?b.confirm(w("common.delMessage"),w("common.delWarning"),{confirmButtonText:w("common.delOk"),cancelButtonText:w("common.delCancel"),type:"warning"}).then((async()=>{await y(s,e)})).catch((()=>{})):await y(s,e)}};return(null==e?void 0:e.props)&&P.setProps(e.props),{register:(e,a)=>{s.value=e,o.value=a},elTableRef:o,tableObject:n,methods:P}};export{y as u};
