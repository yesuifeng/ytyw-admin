import{_ as e}from"./ContentWrap.05f9c347.js";import{_ as a}from"./Search.1b1ee4d3.js";import{_ as t}from"./Dialog.e9896c53.js";import{d as l,b as o,a3 as i,aO as r,r as s,o as n,c as m,l as p,a as d,m as c,F as u,A as f,k as b,v as g,t as v,i as j,y,a5 as D}from"./index.fce40114.js";/* empty css                  *//* empty css               */import{_}from"./Table.vue_vue_type_script_lang.a35ec463.js";import{g as w,d as x,s as k}from"./index.72dc9638.js";import{u as R}from"./useTable.b32bca35.js";import h from"./Write.ff97308f.js";import C from"./Detail.a9c86a13.js";/* empty css                *//* empty css                  */import"./Form.vue_vue_type_script_lang.e1b3ddf6.js";/* empty css                     *//* empty css               *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                   */import"./InputPassword.6e38ae1b.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.100b4827.js";import"./tsxHelper.dbd7218e.js";import"./useForm.087daf55.js";/* empty css                   *//* empty css                   *//* empty css                      */import"./useAxios.b84ad4c6.js";/* empty css                       */import"./formRules.b99bb540.js";import"./Descriptions.f55e2ed0.js";const S={class:"mb-10px"},P=l({setup(l){const{register:P,tableObject:z,methods:F}=R({getListApi:w,delListApi:x,response:{list:"list",total:"total"}}),{getList:L,setSearchParams:A}=F;L();const{t:T}=f(),U=[{label:T("exampleDemo.title"),value:"",component:"Input",field:"title"}],V=o([{field:"index",label:T("tableDemo.index"),type:"index"},{field:"title",label:T("tableDemo.title")},{field:"author",label:T("tableDemo.author")},{field:"display_time",label:T("tableDemo.displayTime")},{field:"importance",label:T("tableDemo.importance"),formatter:(e,a,t)=>i(r,{type:1===t?"success":2===t?"warning":"danger"},(()=>T(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly")))},{field:"pageviews",label:T("tableDemo.pageviews")},{field:"action",width:"260px",label:T("tableDemo.action")}]),I=s(!1),O=s(""),W=()=>{O.value=T("exampleDemo.add"),z.currentRow=null,I.value=!0},E=s(!1),H=async(e,a)=>{var t;z.currentRow=e;const{delList:l,getSelections:o}=F,i=await o();E.value=!0,await l(a?i.map((e=>e.id)):[null==(t=z.currentRow)?void 0:t.id],a).finally((()=>{E.value=!1}))},q=s(""),B=(e,a)=>{O.value=T("edit"===a?"exampleDemo.edit":"exampleDemo.detail"),q.value=a,z.currentRow=e,I.value=!0},G=s(),J=s(!1),K=async()=>{var e;const a=d(G);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){J.value=!0;const e=await(null==a?void 0:a.getFormData());await k({data:e}).catch((()=>{})).finally((()=>{J.value=!1}))&&(I.value=!1,z.currentPage=1,L())}})))};return(l,o)=>(n(),m(u,null,[p(d(e),null,{default:c((()=>[p(d(a),{schema:U,onSearch:d(A),onReset:d(A)},null,8,["onSearch","onReset"]),b("div",S,[p(d(j),{type:"primary",onClick:W},{default:c((()=>[g(v(d(T)("exampleDemo.add")),1)])),_:1}),p(d(j),{loading:E.value,type:"danger",onClick:o[0]||(o[0]=e=>H(null,!0))},{default:c((()=>[g(v(d(T)("exampleDemo.del")),1)])),_:1},8,["loading"])]),p(d(_),{pageSize:d(z).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>d(z).pageSize=e),currentPage:d(z).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>d(z).currentPage=e),columns:d(V),data:d(z).tableList.splice(0,5),loading:d(z).loading,pagination:{total:d(z).total},onRegister:d(P)},{action:c((({row:e})=>[p(d(j),{type:"primary",onClick:a=>B(e,"edit")},{default:c((()=>[g(v(d(T)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),p(d(j),{type:"success",onClick:a=>B(e,"detail")},{default:c((()=>[g(v(d(T)("exampleDemo.detail")),1)])),_:2},1032,["onClick"]),p(d(j),{type:"danger",onClick:a=>H(e,!1)},{default:c((()=>[g(v(d(T)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}),p(d(t),{modelValue:I.value,"onUpdate:modelValue":o[4]||(o[4]=e=>I.value=e),title:O.value},{footer:c((()=>["detail"!==q.value?(n(),y(d(j),{key:0,type:"primary",loading:J.value,onClick:K},{default:c((()=>[g(v(d(T)("exampleDemo.save")),1)])),_:1},8,["loading"])):D("v-if",!0),p(d(j),{onClick:o[3]||(o[3]=e=>I.value=!1)},{default:c((()=>[g(v(d(T)("dialogDemo.close")),1)])),_:1})])),default:c((()=>["detail"!==q.value?(n(),y(h,{key:0,ref_key:"writeRef",ref:G,"current-row":d(z).currentRow},null,8,["current-row"])):D("v-if",!0),"detail"===q.value?(n(),y(C,{key:1,"current-row":d(z).currentRow},null,8,["current-row"])):D("v-if",!0)])),_:1},8,["modelValue","title"])],64))}});export{P as default};
