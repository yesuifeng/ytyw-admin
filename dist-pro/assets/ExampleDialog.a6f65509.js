import{_ as e}from"./ContentWrap.92af843c.js";import{_ as a}from"./Search.a6e72636.js";import{_ as t}from"./Dialog.c111de70.js";import{d as l,b as o,a3 as i,aO as r,r as s,o as n,c as m,l as p,a as d,m as c,F as u,A as f,k as g,v,t as b,i as j,y,a5 as D}from"./index.f465d987.js";/* empty css                  *//* empty css               */import{_}from"./Table.vue_vue_type_script_lang.acf25f9e.js";import{g as w,d as x,s as k}from"./index.d574034f.js";import{u as R}from"./useTable.59458d77.js";import h from"./Write.aaee712f.js";import C from"./Detail.ece310bb.js";/* empty css                *//* empty css                  */import"./Form.vue_vue_type_script_lang.deea7dfd.js";/* empty css                     *//* empty css               *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                   */import"./InputPassword.744be6f3.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.ab308143.js";import"./tsxHelper.1c6f9aac.js";import"./useForm.783ea7df.js";/* empty css                   *//* empty css                   *//* empty css                      */import"./useAxios.4c6e3f89.js";/* empty css                       */import"./formRules.a198e8cd.js";import"./Descriptions.85ec4ea2.js";const S={class:"mb-10px"},P=l({setup(l){const{register:P,tableObject:z,methods:F}=R({getListApi:w,delListApi:x,response:{list:"list",total:"total"}}),{getList:L,setSearchParams:A}=F;L();const{t:T}=f(),U=[{label:T("exampleDemo.title"),value:"",component:"Input",field:"title"}],V=o([{field:"index",label:T("tableDemo.index"),type:"index"},{field:"title",label:T("tableDemo.title")},{field:"author",label:T("tableDemo.author")},{field:"display_time",label:T("tableDemo.displayTime")},{field:"importance",label:T("tableDemo.importance"),formatter:(e,a,t)=>i(r,{type:1===t?"success":2===t?"warning":"danger"},(()=>T(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly")))},{field:"pageviews",label:T("tableDemo.pageviews")},{field:"action",width:"260px",label:T("tableDemo.action")}]),I=s(!1),O=s(""),W=()=>{O.value=T("exampleDemo.add"),z.currentRow=null,I.value=!0},E=s(!1),H=async(e,a)=>{var t;z.currentRow=e;const{delList:l,getSelections:o}=F,i=await o();E.value=!0,await l(a?i.map((e=>e.id)):[null==(t=z.currentRow)?void 0:t.id],a).finally((()=>{E.value=!1}))},q=s(""),B=(e,a)=>{O.value=T("edit"===a?"exampleDemo.edit":"exampleDemo.detail"),q.value=a,z.currentRow=e,I.value=!0},G=s(),J=s(!1),K=async()=>{var e;const a=d(G);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){J.value=!0;const e=await(null==a?void 0:a.getFormData());await k({data:e}).catch((()=>{})).finally((()=>{J.value=!1}))&&(I.value=!1,z.currentPage=1,L())}})))};return(l,o)=>(n(),m(u,null,[p(d(e),null,{default:c((()=>[p(d(a),{schema:U,onSearch:d(A),onReset:d(A)},null,8,["onSearch","onReset"]),g("div",S,[p(d(j),{type:"primary",onClick:W},{default:c((()=>[v(b(d(T)("exampleDemo.add")),1)])),_:1}),p(d(j),{loading:E.value,type:"danger",onClick:o[0]||(o[0]=e=>H(null,!0))},{default:c((()=>[v(b(d(T)("exampleDemo.del")),1)])),_:1},8,["loading"])]),p(d(_),{pageSize:d(z).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>d(z).pageSize=e),currentPage:d(z).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>d(z).currentPage=e),columns:d(V),data:d(z).tableList.splice(0,5),loading:d(z).loading,pagination:{total:d(z).total},onRegister:d(P)},{action:c((({row:e})=>[p(d(j),{type:"primary",onClick:a=>B(e,"edit")},{default:c((()=>[v(b(d(T)("exampleDemo.edit")),1)])),_:2},1032,["onClick"]),p(d(j),{type:"success",onClick:a=>B(e,"detail")},{default:c((()=>[v(b(d(T)("exampleDemo.detail")),1)])),_:2},1032,["onClick"]),p(d(j),{type:"danger",onClick:a=>H(e,!1)},{default:c((()=>[v(b(d(T)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}),p(d(t),{modelValue:I.value,"onUpdate:modelValue":o[4]||(o[4]=e=>I.value=e),title:O.value},{footer:c((()=>["detail"!==q.value?(n(),y(d(j),{key:0,type:"primary",loading:J.value,onClick:K},{default:c((()=>[v(b(d(T)("exampleDemo.save")),1)])),_:1},8,["loading"])):D("v-if",!0),p(d(j),{onClick:o[3]||(o[3]=e=>I.value=!1)},{default:c((()=>[v(b(d(T)("dialogDemo.close")),1)])),_:1})])),default:c((()=>["detail"!==q.value?(n(),y(h,{key:0,ref_key:"writeRef",ref:G,"current-row":d(z).currentRow},null,8,["current-row"])):D("v-if",!0),"detail"===q.value?(n(),y(C,{key:1,"current-row":d(z).currentRow},null,8,["current-row"])):D("v-if",!0)])),_:1},8,["modelValue","title"])],64))}});export{P as default};
