import{U as e,V as r,W as s,X as t}from"./index.fce40114.js";const{result_code:a,base_url:o}=r,n=o.pro,p=e.create({baseURL:n,timeout:r.request_timeout});p.interceptors.request.use((e=>{if("post"===e.method&&"application/x-www-form-urlencoded"===e.headers["Content-Type"]&&(e.data=s.stringify(e.data)),"get"===e.method&&e.params){let r=e.url;r+="?";const s=Object.keys(e.params);for(const t of s)void 0!==e.params[t]&&null!==e.params[t]&&(r+=`${t}=${encodeURIComponent(e.params[t])}&`);r=r.substring(0,r.length-1),e.params={},e.url=r}return e}),(e=>{Promise.reject(e)})),p.interceptors.response.use((e=>{if(e.data.code===a)return e.data;t.error(e.data.message)}),(e=>(t.error(e.message),Promise.reject(e))));const{default_headers:d}=r,m=()=>({request:e=>{const{url:r,method:s,params:t,data:a,headersType:o,responseType:n}=e;return p({url:r,method:s,params:t,data:a,responseType:n,headers:{"Content-Type":o||d}})}});export{m as u};
